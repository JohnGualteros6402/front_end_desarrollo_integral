<app-dashboard-user></app-dashboard-user>

<!-- Container -->
<div class="vh-100 vw-100 row p-5">
  <div class="p-5">
    <div class="col-md-2">
      <input type="text" class="form-control" placeholder="Buscar" name="search" (keyup)="searchQuestion()"
        [(ngModel)]="searchText" />
    </div>
    <div class="row py-2">
      <div class="col-md-6 questions-container">
        <div class="p-1 rounded">
          <h3 class="text-dark fs-5">Lista de preguntas</h3>
        </div>
        <div class="d-flex justify-content-end text-muted p-2">
          {{ numberofquestions }} preguntas encontradas
        </div>
        <div class="border-bottom border-top p-2" *ngFor="let question of filteredQuestions">
          <a (click)="getQuestionAndRedirect(question.idquestion)" class="card-question">
            <p class="fw-bold">{{ question.statement }}</p>
          </a>
        </div>
      </div>
      <div class="col-md-6">
        <!-- Validate if question is different to null -->
        <div *ngIf="question != null">
          <div class="p-1 rounded bg-blue-dark">
            <h3 class="text-light text-center fs-5">
              {{ question.statement }}
            </h3>
          </div>
          <div class="d-flex justify-content-between text-muted p-2">
            <div>
              <p class="text-blue-dark">
                <span class="fw-bold">Tema:</span> {{ question.survey.theme }}
              </p>
            </div>
            <p>{{ question.openingdate }} - {{ question.closingdate }}</p>
          </div>
          <hr />
          <form class="d-flex" #responseForm="ngForm" method="post" autocomplete="off">
            <input type="text" name="response" id="response" [(ngModel)]="objectResponse.response"
              placeholder="escribe tu respuesta aquÃ­" class="form-control me-1">
            <div class="d-flex justify-content-end">
              <button type="button" class="btn btn-blue-king" (click)="saveResponse()">
                <i class="fa-solid fa-paper-plane"></i>
              </button>
            </div>
          </form>

          <div class="responses-container">
            <div class="response" *ngFor="let response of responsesDependOfId">
              <div class="header-response">
                <p>
                  {{ response.user.name }} {{ response.user.lastname }}
                </p>

                <p>
                  {{ response.dateresponse }}
                </p>
              </div>
              <div class="body-response">
                {{ response.response }}
              </div>
            </div>
          </div>
        </div>
        <div class="bg-blue-dark p-1 rounded" *ngIf="question == null">
          <h3 class="text-light text-center fs-5">Pregunta</h3>
        </div>
      </div>
      <div class="certification w-50">
        <h2 class="text-dark fs-5">Certificados:</h2>
        <div class="header-response" *ngFor="let data of dataAny">
          <div class="d-flex justify-content-between w-100 my-2">
            <p>{{ data.question.survey.theme }} {{  data.dateresponse }} </p>
            <button type="button" class="btn btn-blue-king" (click)="createReportPDF( data.user.name+' '+ data.user.lastname, data.user.numberdocument,
              data.question.survey.theme ,data.question.statement, data.dateresponse)">Certificado
              <i class="fa-solid fa-arrow-down"></i>
            </button>
          </div>
          <hr />
        </div>
      </div>
    </div>
  </div>
</div>
